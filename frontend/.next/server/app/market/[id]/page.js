(()=>{var e={};e.id=8144,e.ids=[8144],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},60736:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(23805),s(84752),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["market",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23805)),"/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,84752)),"/home/clawdbot/projects/ember-vote-arena/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx"],x="/market/[id]/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/market/[id]/page",pathname:"/market/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},82096:(e,t,s)=>{Promise.resolve().then(s.bind(s,39008))},39008:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(10326),a=s(17577),n=s(35047),i=s(95224),l=s(37945),d=s(73952),o=s(40718),c=s(36706),x=s(10647),u=s(86889),m=s(90434),g=s(54957),h=s(56989);function p(){let e=BigInt((0,n.useParams)().id),t=(0,i.x)(),{address:s,isConnected:p}=(0,l.m)(),y=g.qE[t]||g.qE[h.L.id],[v,N]=(0,a.useState)("10"),[f,w]=(0,a.useState)(null),{data:q}=(0,d.u)({address:y.arena,abi:g.w$,functionName:"getMarket",args:[e]}),{data:E}=(0,d.u)({address:y.arena,abi:g.w$,functionName:"getLeaderboard",args:[e]}),{data:P}=(0,d.u)({address:y.arena,abi:g.w$,functionName:"getCurrentVotePrice",args:[e,BigInt(v||"1")]}),{writeContract:k,data:D,isPending:C}=(0,o.S)(),{isLoading:_,isSuccess:S}=(0,c.A)({hash:D}),{writeContract:V,data:$,isPending:A}=(0,o.S)(),{isLoading:L}=(0,c.A)({hash:$});if(!q)return r.jsx("main",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading market..."})});let M=Math.floor(Date.now()/1e3),R=M<Number(q.entryEnd),B=M>=Number(q.entryEnd)&&M<Number(q.voteEnd),I=M>=Number(q.voteEnd),F=q.resolved,G=E?.[0]||[],T=E?.[1]||[];return(0,r.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900",children:[r.jsx("header",{className:"border-b border-gray-700 bg-gray-900/50 backdrop-blur-sm sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,r.jsxs)(m.default,{href:"/",className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:"\uD83D\uDC09"}),r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Ember Vote Arena"})]}),r.jsx(x.NL,{})]})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:q.title}),r.jsx("p",{className:"text-gray-400 mt-2",children:q.rules})]}),r.jsx(b,{isEntryPhase:R,isVotingPhase:B,isResolved:F})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:q.entryCount.toString()}),r.jsx("div",{className:"text-sm text-gray-400",children:"Entries"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:q.totalVotes.toString()}),r.jsx("div",{className:"text-sm text-gray-400",children:"Total Votes"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-500",children:(0,u.d)(q.totalPot)}),r.jsx("div",{className:"text-sm text-gray-400",children:"EMBER Pot"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:(0,u.d)(q.entryCost)}),r.jsx("div",{className:"text-sm text-gray-400",children:"Entry Cost"})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-400",children:[R&&(0,r.jsxs)("span",{children:["Entry phase ends: ",new Date(1e3*Number(q.entryEnd)).toLocaleString()]}),B&&(0,r.jsxs)("span",{children:["Voting ends: ",new Date(1e3*Number(q.voteEnd)).toLocaleString()]}),I&&!F&&r.jsx("span",{className:"text-orange-500",children:"Voting ended - ready to resolve!"})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:F?"\uD83C\uDFC6 Final Results":"\uD83D\uDCCA Leaderboard"}),0===G.length?r.jsx("div",{className:"bg-gray-800/50 rounded-xl p-8 text-center",children:r.jsx("p",{className:"text-gray-400",children:"No entries yet"})}):r.jsx("div",{className:"space-y-3",children:G.map((t,s)=>r.jsx(j,{marketId:e,entryId:t,votes:T[s],rank:s+1,isSelected:f===Number(t),onSelect:()=>B&&w(Number(t)),isVotingPhase:B,contracts:y},t.toString()))})]}),p&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6",children:[B&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Cast Your Vote"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Number of Votes"}),r.jsx("input",{type:"number",value:v,onChange:e=>N(e.target.value),min:"1",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Cost"}),(0,r.jsxs)("div",{className:"text-lg font-semibold text-orange-500",children:[P?(0,u.d)(P):"..."," EMBER"]})]})]}),r.jsx("button",{onClick:()=>{null!==f&&k({address:y.arena,abi:g.w$,functionName:"vote",args:[e,BigInt(f),BigInt(v)]})},disabled:C||_||null===f,className:"w-full py-3 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:C||_?"Voting...":null===f?"Select an Entry to Vote":`Vote for Entry #${f}`}),S&&r.jsx("p",{className:"text-green-500 text-sm mt-2 text-center",children:"Vote cast successfully! \uD83C\uDF89"})]}),I&&!F&&(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-400 mb-4",children:"Voting has ended. Anyone can resolve this market!"}),r.jsx("button",{onClick:()=>{V({address:y.arena,abi:g.w$,functionName:"resolve",args:[e]})},disabled:A||L,className:"px-8 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors",children:A||L?"Resolving...":"Resolve Market \uD83C\uDFC6"})]}),F&&(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-green-500 font-semibold",children:"âœ… This market has been resolved!"}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Payouts have been distributed to winners."})]})]})]})]})}function b({isEntryPhase:e,isVotingPhase:t,isResolved:s}){return s?r.jsx("span",{className:"px-3 py-1 bg-gray-500 text-white rounded-full text-sm",children:"Resolved"}):e?r.jsx("span",{className:"px-3 py-1 bg-green-500 text-white rounded-full text-sm",children:"Entry Phase"}):t?r.jsx("span",{className:"px-3 py-1 bg-orange-500 text-white rounded-full text-sm",children:"Voting"}):r.jsx("span",{className:"px-3 py-1 bg-red-500 text-white rounded-full text-sm",children:"Ended"})}function j({marketId:e,entryId:t,votes:s,rank:a,isSelected:n,onSelect:i,isVotingPhase:l,contracts:o}){let{data:c}=(0,d.u)({address:o.arena,abi:g.w$,functionName:"getEntry",args:[e,t]});if(!c||c.filtered)return null;let x=1===a?"\uD83E\uDD47":2===a?"\uD83E\uDD48":3===a?"\uD83E\uDD49":`#${a}`;return r.jsx("div",{onClick:i,className:`bg-gray-800 rounded-lg p-4 border-2 transition-colors ${n?"border-orange-500":l?"border-transparent hover:border-gray-600 cursor-pointer":"border-transparent"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-2xl",children:x}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-white font-medium",children:c.data}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["by ",c.author.slice(0,6),"...",c.author.slice(-4)]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-xl font-bold text-white",children:s.toString()}),r.jsx("div",{className:"text-sm text-gray-400",children:"votes"})]})]})})}},23805:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=s(68570);let a=(0,r.createProxy)(String.raw`/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,r.createProxy)(String.raw`/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9754,2066,9842],()=>s(60736));module.exports=r})();