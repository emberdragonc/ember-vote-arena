(()=>{var e={};e.id=834,e.ids=[834],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},37148:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(77793),s(84752),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["market",{children:["[id]",{children:["submit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,77793)),"/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/submit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,84752)),"/home/clawdbot/projects/ember-vote-arena/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/submit/page.tsx"],x="/market/[id]/submit/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/market/[id]/submit/page",pathname:"/market/[id]/submit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},13703:(e,t,s)=>{Promise.resolve().then(s.bind(s,21407))},21407:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(10326),a=s(17577),i=s(35047),n=s(95224),l=s(37945),o=s(73952),d=s(40718),c=s(36706),x=s(10647),m=s(86889),u=s(90434),p=s(54957),b=s(56989);let h=[{symbol:"EMBER",name:"$EMBER"},{symbol:"USDC",name:"USDC"},{symbol:"ETH",name:"ETH"},{symbol:"USDT",name:"USDT"}];function g(e){let t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function y(){let e=BigInt((0,i.useParams)().id),t=(0,n.x)(),{address:s,isConnected:y}=(0,l.m)(),f=p.qE[t]||p.qE[b.L.id],[j,N]=(0,a.useState)(""),[v,w]=(0,a.useState)(null),[k,E]=(0,a.useState)(null),[S,q]=(0,a.useState)("EMBER"),C=(0,a.useRef)(null),{data:P}=(0,o.u)({address:f.arena,abi:p.w$,functionName:"getMarket",args:[e]}),{data:D}=(0,o.u)({address:f.ember,abi:p.RB,functionName:"allowance",args:s?[s,f.arena]:void 0}),{data:B}=(0,o.u)({address:f.ember,abi:p.RB,functionName:"balanceOf",args:s?[s]:void 0}),A=P?.entryCost||BigInt(0),M=!D||D<A,R="EMBER"===S,{writeContract:_,data:$,isPending:T}=(0,d.S)(),{isLoading:I,isSuccess:L}=(0,c.A)({hash:$}),{writeContract:F,data:U,isPending:G}=(0,d.S)(),{isLoading:O,isSuccess:z}=(0,c.A)({hash:U}),[H,Y]=(0,a.useState)("idle"),[J,K]=(0,a.useState)(""),[V,W]=(0,a.useState)(null),[X,Q]=(0,a.useState)(!1),Z=async()=>{let t=k?JSON.stringify({text:j,image:k}):j;Y("pending-approval"),K("");try{let s=await fetch("/api/oracle/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({marketId:e.toString(),data:t,rules:P?.rules||""})}),r=await s.json();if(!s.ok)throw Error(r.error||"Oracle request failed");if(r.filtered){Y("error"),K(r.reason||"Entry was filtered by AI moderation");return}W(r.signature),Q(r.approved),Y("submitting"),F({address:f.arena,abi:p.w$,functionName:"submitEntry",args:[e,t,r.approved,r.signature]})}catch(e){Y("error"),K(e.message||"Failed to submit entry. Please try again.")}};if(!P)return r.jsx("main",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading..."})});if(!(Math.floor(Date.now()/1e3)<Number(P.entryEnd)))return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-950",children:[r.jsx("nav",{className:"fixed top-0 w-full z-50 bg-gray-950/80 backdrop-blur-xl border-b border-gray-800/50",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[r.jsx(u.default,{href:"/",className:"text-xl font-bold text-white",children:"The Arena"}),r.jsx(x.NL,{})]})}),(0,r.jsxs)("div",{className:"pt-32 px-6 text-center",children:[r.jsx("div",{className:"text-5xl mb-4",children:"⏰"}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Entry Phase Ended"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"This market is no longer accepting entries."}),r.jsx(u.default,{href:`/market/${e}`,className:"text-blue-400 hover:text-blue-300",children:"← Back to Market"})]})]});if(z)return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-950",children:[r.jsx("nav",{className:"fixed top-0 w-full z-50 bg-gray-950/80 backdrop-blur-xl border-b border-gray-800/50",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[r.jsx(u.default,{href:"/",className:"text-xl font-bold text-white",children:"The Arena"}),r.jsx(x.NL,{})]})}),(0,r.jsxs)("div",{className:"pt-32 px-6 text-center",children:[r.jsx("div",{className:"text-6xl mb-6",children:"\uD83C\uDF89"}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Entry Submitted!"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Your entry is now in the competition. Good luck!"}),r.jsx(u.default,{href:`/market/${e}`,className:"inline-block px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium",children:"View Market →"})]})]});let ee=Number((0,m.d)(A)),et=.001*ee,es=R?null:{pay:({USDC:et,ETH:et/2500,USDT:et})[S]?.toFixed("ETH"===S?6:2)||"0",receive:g(ee.toFixed(0)),symbol:S},er=function(e,t){let s=[],r=t.toLowerCase(),a=e.toLowerCase();return a.includes("meme")||a.includes("funny")?s.push("Share your best, most creative content"):a.includes("photo")||a.includes("picture")?s.push("Upload a high-quality image that fits the theme"):a.includes("best")||a.includes("contest")?s.push("Submit your best work for a chance to win"):s.push("Make your entry stand out from the crowd"),r.includes("original")&&s.push("Only original content allowed - no reposts"),(r.includes("no nsfw")||r.includes("sfw"))&&s.push("Keep it family-friendly (no NSFW content)"),(r.includes("on-topic")||r.includes("relevant"))&&s.push("Stay on topic with the market theme"),s.push("Images work best at 1200x630px or similar"),s.push("Add a caption to explain your entry"),s}(P.title,P.rules);return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-950",children:[r.jsx("nav",{className:"fixed top-0 w-full z-50 bg-gray-950/80 backdrop-blur-xl border-b border-gray-800/50",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[r.jsx(u.default,{href:"/",className:"text-xl font-bold text-white",children:"The Arena"}),r.jsx(x.NL,{})]})}),r.jsx("div",{className:"pt-28 pb-20 px-6",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(u.default,{href:`/market/${e}`,className:"text-gray-400 hover:text-white text-sm mb-4 inline-block",children:["← Back to ",P.title]}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Submit Entry"}),r.jsx("p",{className:"text-gray-400 mb-8",children:P.title}),y?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-2xl p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[r.jsx("span",{children:"\uD83D\uDCCB"})," Entry Guidelines"]}),r.jsx("ul",{className:"space-y-2",children:er.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start gap-2 text-gray-300 text-sm",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:"✓"}),r.jsx("span",{children:e})]},t))})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Upload Image (Optional)"}),k?(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{src:k,alt:"Preview",className:"w-full rounded-xl max-h-80 object-cover"}),r.jsx("button",{onClick:()=>{w(null),E(null),C.current&&(C.current.value="")},className:"absolute top-2 right-2 p-2 bg-gray-900/80 hover:bg-gray-800 rounded-full transition-colors",children:r.jsx("span",{className:"text-white",children:"✕"})})]}):(0,r.jsxs)("div",{onClick:()=>C.current?.click(),className:"border-2 border-dashed border-gray-700 hover:border-blue-500/50 rounded-xl p-8 text-center cursor-pointer transition-colors",children:[r.jsx("div",{className:"text-4xl mb-3",children:"\uD83D\uDCF7"}),r.jsx("p",{className:"text-white font-medium mb-1",children:"Click to upload image"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"PNG, JPG, GIF up to 5MB"}),r.jsx("p",{className:"text-gray-600 text-xs mt-2",children:"Recommended: 1200\xd7630px or 1:1 ratio"})]}),r.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>5242880){alert("Image must be under 5MB");return}w(t);let e=new FileReader;e.onloadend=()=>{E(e.result)},e.readAsDataURL(t)}},className:"hidden"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:k?"Caption / Description":"Your Entry"}),r.jsx("textarea",{value:j,onChange:e=>N(e.target.value),placeholder:k?"Add a caption to your image...":"Enter your submission...",rows:4,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Entry Cost"}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Pay with"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:h.map(e=>r.jsx("button",{onClick:()=>q(e.symbol),className:`py-3 px-4 rounded-xl text-sm font-medium transition-all ${S===e.symbol?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:e.symbol},e.symbol))})]}),r.jsx("div",{className:"bg-gray-800/50 rounded-xl p-4 mb-4",children:R?(0,r.jsxs)("div",{className:"text-center py-2",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-white",children:[g(ee.toFixed(0))," $EMBER"]}),(0,r.jsxs)("div",{className:"text-gray-500 text-sm mt-1",children:["≈ $",et.toFixed(2)," USD"]})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"You pay:"}),(0,r.jsxs)("span",{className:"text-white font-semibold",children:[es?.pay," ",es?.symbol]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Swaps to:"}),(0,r.jsxs)("span",{className:"text-gray-400",children:[es?.receive," $EMBER"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Added to pot:"}),(0,r.jsxs)("span",{className:"text-blue-400",children:[es?.receive," $EMBER"]})]})]})}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Your $EMBER Balance:"}),r.jsx("span",{className:"text-white",children:B?g((0,m.d)(B)):"0"})]}),R&&r.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:r.jsx("p",{className:"text-blue-400 text-sm",children:"\uD83D\uDCA1 Don't have $EMBER? Select another token above to pay with any token on Base."})})]}),"pending-approval"===H&&(0,r.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:"\uD83E\uDD16"}),r.jsx("p",{className:"text-blue-400 font-medium",children:"AI is reviewing your entry..."}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"This takes just a moment"})]}),"submitting"===H&&(0,r.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4 text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:"✅"}),r.jsx("p",{className:"text-green-400 font-medium",children:"Approved! Submitting to blockchain..."}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please confirm the transaction in your wallet"})]}),"error"===H&&J&&r.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"⚠️"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-red-400 font-medium",children:"Submission Issue"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:J})]})]})}),r.jsx("div",{className:"flex gap-4",children:R?M&&!L?r.jsx("button",{onClick:()=>{_({address:f.ember,abi:p.RB,functionName:"approve",args:[f.arena,A]})},disabled:T||I,className:"flex-1 py-4 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-semibold transition-colors disabled:opacity-50",children:T||I?"Approving...":"Approve $EMBER"}):r.jsx("button",{onClick:Z,disabled:"pending-approval"===H||!j.trim()&&!k,className:"flex-1 py-4 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-semibold transition-colors disabled:opacity-50",children:"pending-approval"===H?"Checking...":"Submit for Review"}):r.jsx("button",{disabled:"pending-approval"===H||!j.trim()&&!k,className:"flex-1 py-4 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-semibold transition-colors disabled:opacity-50",children:"pending-approval"===H?"Checking...":"Swap & Submit for Review"})}),r.jsx("p",{className:"text-center text-gray-500 text-xs",children:"All entries are reviewed by AI to ensure they follow the guidelines"})]}):(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 text-center",children:[r.jsx("p",{className:"text-gray-400 mb-4",children:"Connect your wallet to submit an entry"}),r.jsx(x.NL,{})]})]})})]})}},77793:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=s(68570);let a=(0,r.createProxy)(String.raw`/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/submit/page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let l=(0,r.createProxy)(String.raw`/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/submit/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,4123,2066,9842],()=>s(37148));module.exports=r})();