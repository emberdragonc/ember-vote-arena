(()=>{var e={};e.id=8144,e.ids=[8144],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},60736:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(23805),s(84752),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["market",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23805)),"/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,84752)),"/home/clawdbot/projects/ember-vote-arena/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx"],x="/market/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/market/[id]/page",pathname:"/market/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},82096:(e,t,s)=>{Promise.resolve().then(s.bind(s,39008))},39008:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(10326),a=s(17577),n=s(35047),i=s(95224),l=s(37945),d=s(73952),c=s(40718),o=s(36706),x=s(10647),m=s(86889),u=s(90434),h=s(54957),p=s(56989);function b(e){let t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function g({targetTime:e,label:t}){let[s,n]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-2xl p-6 text-center",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:t}),r.jsx("div",{className:"text-4xl font-bold text-white font-mono",children:s})]})}function j(){let e=BigInt((0,n.useParams)().id),t=(0,i.x)(),{address:s,isConnected:j}=(0,l.m)(),f=h.qE[t]||h.qE[p.L.id],[v,w]=(0,a.useState)("10"),[E,D]=(0,a.useState)(null),{data:k}=(0,d.u)({address:f.arena,abi:h.w$,functionName:"getMarket",args:[e]}),{data:q}=(0,d.u)({address:f.arena,abi:h.w$,functionName:"getLeaderboard",args:[e]}),{data:P}=(0,d.u)({address:f.arena,abi:h.w$,functionName:"getCurrentVotePrice",args:[e,BigInt(v||"1")]}),{writeContract:C,data:S,isPending:_}=(0,c.S)(),{isLoading:$,isSuccess:V}=(0,o.A)({hash:S}),{writeContract:M,data:A,isPending:F}=(0,c.S)(),{isLoading:B}=(0,o.A)({hash:A});if(!k)return r.jsx("main",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading market..."})});let L=Math.floor(Date.now()/1e3),R=L<Number(k.entryEnd),I=L>=Number(k.entryEnd)&&L<Number(k.voteEnd),T=L>=Number(k.voteEnd),G=k.resolved,z=q?.[0]||[],O=q?.[1]||[],Y=Number((0,m.d)(k.totalPot));return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-950",children:[r.jsx("nav",{className:"fixed top-0 w-full z-50 bg-gray-950/80 backdrop-blur-xl border-b border-gray-800/50",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[r.jsx(u.default,{href:"/",className:"flex items-center gap-2",children:r.jsx("span",{className:"text-xl font-bold text-white",children:"The Arena"})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(u.default,{href:"/profile",className:"text-gray-400 hover:text-white transition-colors text-sm font-medium",children:"Profile"}),r.jsx(x.NL,{})]})]})}),r.jsx("div",{className:"pt-24 pb-20 px-6",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-start justify-between gap-4 mb-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx(y,{isEntryPhase:R,isVotingPhase:I,isResolved:G}),r.jsx("h1",{className:"text-4xl font-bold text-white mt-3",children:k.title}),r.jsx("p",{className:"text-xl text-gray-400 mt-2",children:function(e,t){let s=e.toLowerCase();return s.includes("best")||s.includes("contest")?"Submit your entry and let the community decide the winner":s.includes("vote")||s.includes("poll")?"Cast your vote and help decide the outcome":s.includes("predict")?"Make your prediction and compete for the prize pool":"Join the competition and vote for your favorites"}(k.title,k.rules)})]})}),R&&(0,r.jsxs)("div",{className:"mt-6",children:[r.jsx(g,{targetTime:Number(k.entryEnd),label:"Entry Phase Ends In"}),r.jsx("p",{className:"text-center text-gray-500 text-sm mt-2",children:"Voting begins when entry phase ends"})]}),I&&r.jsx("div",{className:"mt-6",children:r.jsx(g,{targetTime:Number(k.voteEnd),label:"Voting Ends In"})})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[R&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-500/10 to-transparent border border-blue-500/30 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Submit Your Entry"}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm mb-4",children:["Entry cost: ",(0,r.jsxs)("span",{className:"text-white font-medium",children:[b((0,m.d)(k.entryCost))," $EMBER"]})]}),r.jsx(u.default,{href:`/market/${e}/submit`,className:"inline-block px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition-colors",children:"Submit Entry →"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:G?"\uD83C\uDFC6 Final Results":"\uD83D\uDCCA Leaderboard"}),0===z.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDD"}),r.jsx("p",{className:"text-gray-400",children:"No entries yet. Be the first!"})]}):r.jsx("div",{className:"space-y-3",children:z.map((t,s)=>r.jsx(N,{marketId:e,entryId:t,votes:O[s],rank:s+1,isSelected:E===Number(t),onSelect:()=>I&&D(Number(t)),isVotingPhase:I,contracts:f},t.toString()))})]}),j&&I&&(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Cast Your Vote"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Number of Votes"}),r.jsx("input",{type:"number",value:v,onChange:e=>w(e.target.value),min:"1",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white"})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Cost"}),(0,r.jsxs)("div",{className:"text-xl font-semibold text-blue-500",children:[P?b((0,m.d)(P)):"..."," $EMBER"]})]})]}),r.jsx("button",{onClick:()=>{null!==E&&C({address:f.arena,abi:h.w$,functionName:"vote",args:[e,BigInt(E),BigInt(v)]})},disabled:_||$||null===E,className:"w-full py-4 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-700 text-white rounded-xl font-semibold transition-colors",children:_||$?"Voting...":null===E?"Select an Entry Above":`Vote for Entry #${E}`}),V&&r.jsx("p",{className:"text-green-500 text-sm mt-3 text-center",children:"Vote cast successfully! \uD83C\uDF89"})]}),T&&!G&&(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 text-center",children:[r.jsx("p",{className:"text-gray-400 mb-4",children:"Voting has ended. Anyone can resolve this market!"}),r.jsx("button",{onClick:()=>{M({address:f.arena,abi:h.w$,functionName:"resolve",args:[e]})},disabled:F||B,className:"px-8 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-semibold transition-colors",children:F||B?"Resolving...":"Resolve Market \uD83C\uDFC6"})]}),G&&(0,r.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-2xl p-6 text-center",children:[r.jsx("p",{className:"text-green-400 font-semibold text-lg",children:"✅ This market has been resolved!"}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Payouts have been distributed to winners."})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Prize Pool"}),(0,r.jsxs)("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"text-3xl font-bold text-white",children:b(Y.toFixed(0))}),r.jsx("div",{className:"text-gray-400 text-sm",children:"$EMBER"}),(0,r.jsxs)("div",{className:"text-gray-500 text-xs mt-1",children:["≈ $",(.001*Y).toFixed(2)," USD"]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-800 pt-4 mt-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400 flex items-center gap-2",children:"\uD83E\uDD47 1st Place (55%)"}),r.jsx("span",{className:"text-white font-medium",children:b((.55*Y).toFixed(0))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400 flex items-center gap-2",children:"\uD83E\uDD48 2nd Place (20%)"}),r.jsx("span",{className:"text-white font-medium",children:b((.2*Y).toFixed(0))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400 flex items-center gap-2",children:"\uD83E\uDD49 3rd Place (10%)"}),r.jsx("span",{className:"text-white font-medium",children:b((.1*Y).toFixed(0))})]}),(0,r.jsxs)("div",{className:"border-t border-gray-800 pt-3 mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Stakers (10%)"}),r.jsx("span",{className:"text-gray-400",children:b((.1*Y).toFixed(0))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-gray-500",children:"Creator (5%)"}),r.jsx("span",{className:"text-gray-400",children:b((.05*Y).toFixed(0))})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Market Details"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Entries"}),r.jsx("span",{className:"text-white",children:k.entryCount.toString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total Votes"}),r.jsx("span",{className:"text-white",children:k.totalVotes.toString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Entry Cost"}),(0,r.jsxs)("span",{className:"text-white",children:[b((0,m.d)(k.entryCost))," $EMBER"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Entry Deadline"}),r.jsx("span",{className:"text-white text-xs",children:new Date(1e3*Number(k.entryEnd)).toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Vote Deadline"}),r.jsx("span",{className:"text-white text-xs",children:new Date(1e3*Number(k.voteEnd)).toLocaleString()})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl p-4",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Entry Guidelines"}),r.jsx("p",{className:"text-sm text-gray-400",children:k.rules})]})]})]})]})})]})}function y({isEntryPhase:e,isVotingPhase:t,isResolved:s}){return s?r.jsx("span",{className:"inline-block px-3 py-1 bg-gray-700 text-gray-300 rounded-full text-xs font-medium",children:"Resolved"}):e?r.jsx("span",{className:"inline-block px-3 py-1 bg-green-500/10 text-green-400 border border-green-500/30 rounded-full text-xs font-medium",children:"Accepting Entries"}):t?r.jsx("span",{className:"inline-block px-3 py-1 bg-blue-500/10 text-blue-400 border border-blue-500/30 rounded-full text-xs font-medium",children:"Voting Open"}):r.jsx("span",{className:"inline-block px-3 py-1 bg-red-500/10 text-red-400 border border-red-500/30 rounded-full text-xs font-medium",children:"Ended"})}function N({marketId:e,entryId:t,votes:s,rank:a,isSelected:n,onSelect:i,isVotingPhase:l,contracts:c}){let{data:o}=(0,d.u)({address:c.arena,abi:h.w$,functionName:"getEntry",args:[e,t]});if(!o||o.filtered)return null;let x=1===a?"\uD83E\uDD47":2===a?"\uD83E\uDD48":3===a?"\uD83E\uDD49":`#${a}`;return r.jsx("div",{onClick:i,className:`bg-gray-800 hover:bg-gray-750 rounded-xl p-4 border-2 transition-all ${n?"border-blue-500 bg-blue-500/5":l?"border-transparent hover:border-gray-700 cursor-pointer":"border-transparent"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-2xl",children:x}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-white font-medium",children:o.data}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["by ",o.author.slice(0,6),"...",o.author.slice(-4)]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-xl font-bold text-white",children:s.toString()}),r.jsx("div",{className:"text-xs text-gray-500",children:"votes"})]})]})})}},23805:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=s(68570);let a=(0,r.createProxy)(String.raw`/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,r.createProxy)(String.raw`/home/clawdbot/projects/ember-vote-arena/frontend/app/market/[id]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,4123,2066,9842],()=>s(60736));module.exports=r})();